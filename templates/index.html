<!doctype html>
<html lang="sv">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>El-labb</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="/static/css/style.css" />
  </head>
  <body>
    <div class="app">
      <aside class="sidebar">
        <header class="brand">
          <div class="brand-title">El-labb</div>
          <div class="brand-sub">Rita & simulera AC/DC-scheman</div>
        </header>

        <section class="panel">
          <h2>Verktyg</h2>
          <div class="tool-buttons" id="toolButtons">
            <button data-tool="select" class="active">Markera</button>
            <button data-tool="wire">Ledning</button>
            <button data-tool="meter">Multimeter</button>
            <button data-tool="erase">Radera</button>
          </div>
        </section>

        <section class="panel">
          <h2>Bibliotek</h2>
          <div class="library" id="library"></div>
        </section>

        <section class="panel">
          <h2>Egenskaper</h2>
          <div class="props" id="props">
            <div class="muted">Välj en komponent för att ändra värden.</div>
          </div>
        </section>

        <section class="panel">
          <h2>Multimeter</h2>
          <div class="meter-settings">
            <label><input type="radio" name="meterMode" value="voltage" checked /> DC Volt (V)</label>
            <label><input type="radio" name="meterMode" value="current" /> DC Ampere (A)</label>
            <label><input type="radio" name="meterMode" value="resistance" /> Ohm (Ω)</label>
            <label><input type="radio" name="meterMode" value="ac_voltage" /> AC Volt RMS (V)</label>
            <label><input type="radio" name="meterMode" value="ac_current" /> AC Ampere RMS (A)</label>
            <label><input type="radio" name="meterMode" value="ac_phase" /> Fasvinkel (°)</label>
            <label><input type="radio" name="meterMode" value="ac_power_p" /> Effekt P (W)</label>
            <label><input type="radio" name="meterMode" value="ac_power_q" /> Effekt Q (var)</label>
            <label><input type="radio" name="meterMode" value="ac_power_s" /> Effekt S (VA)</label>
            <label><input type="radio" name="meterMode" value="ac_pf" /> cos φ</label>
          </div>
          <div class="meter-readout" id="meterReadout">-</div>
        </section>

        <section class="panel">
          <h2>Simulering</h2>
          <div class="sim-status" id="simStatus">Redo.</div>
        </section>

        <section class="panel">
          <h2>Debug</h2>
          <div class="debug-controls">
            <button id="debugClear">Rensa logg</button>
          </div>
          <div class="debug-log" id="debugLog"></div>
        </section>

        <section class="panel">
          <h2>Spara & ladda</h2>
          <div class="save-row">
            <input id="saveName" type="text" placeholder="Namn på labb" />
            <button id="saveBtn">Spara</button>
          </div>
          <div class="save-list" id="saveList"></div>
        </section>
      </aside>

      <main class="workspace">
        <div class="toolbar">
          <div class="toolbar-left">Canvas</div>
          <div class="toolbar-right">
            <button id="runBtn" class="primary">Kör simulering</button>
            <button id="simToggle" class="secondary">Simläge: Av</button>
            <button id="gridToggle">Rutnät: På</button>
            <button id="rotateBtn">Rotera 90°</button>
            <button id="undoBtn">Ångra</button>
            <button id="clearBtn" class="danger">Rensa</button>
          </div>
        </div>
        <div class="canvas-wrap">
          <canvas id="schematic"></canvas>
          <div class="canvas-resizer" id="canvasResizer" aria-label="Ändra canvas-storlek"></div>
        </div>
      </main>
    </div>

    <div class="modal-backdrop" id="plcModalBackdrop" aria-hidden="true">
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="plcModalTitle">
        <div class="modal-header">
          <h3 id="plcModalTitle">PLC-program</h3>
          <button id="plcModalClose" class="secondary">Stäng</button>
        </div>
        <div class="modal-body">
          <textarea id="plcModalText" rows="16" spellcheck="false"></textarea>
        </div>
        <div class="modal-actions">
          <button id="plcModalCancel">Avbryt</button>
          <button id="plcModalSave" class="primary">Spara</button>
        </div>
      </div>
    </div>

    <div class="modal-backdrop" id="plcDebugBackdrop" aria-hidden="true">
      <div class="modal" role="dialog" aria-modal="true" aria-labelledby="plcDebugTitle">
        <div class="modal-header">
          <h3 id="plcDebugTitle">PLC-debug</h3>
          <button id="plcDebugClose" class="secondary">Stäng</button>
        </div>
        <div class="modal-body">
          <pre id="plcDebugText" class="plc-debug-text"></pre>
        </div>
      </div>
    </div>

    <script src="/static/js/app.js"></script>
  </body>
</html>
